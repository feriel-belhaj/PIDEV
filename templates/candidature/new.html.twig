{% extends 'base.html.twig' %}

{% block title %}Postuler pour un Partenariat{% endblock %}

{% block body %}
    <div class="container-fluid contact py-6 wow bounceInUp" data-wow-delay="0.1s">
        <div class="container">
            <div class="row g-0">
                <div class="col-1">
                    <img src="{{ asset('img/background-site.jpg') }}" class="img-fluid h-100 rounded-end" style="object-fit: cover; opacity: 5; margin: 0px 0;">
                </div>
                <div class="col-10">
                    <div class="border-bottom border-top border-primary bg-light py-5 px-4 position-relative">
                        
                        <!-- Bouton de fermeture -->
                        <a href="{{ path('app_partenariat_index') }}" class="position-absolute top-0 end-0 m-3 text-danger fs-3" style="text-decoration: none;">&times;</a>
                        
                        <div class="text-center">
                            <small class="d-inline-block fw-bold text-dark text-uppercase bg-light border border-primary rounded-pill px-4 py-1 mb-3">Postuler pour un Partenariat</small>
                            <h1 class="display-5 mb-5">Entrez vos informations</h1>
                        </div>

                        {% if partenariat %}
                            <div class="mb-4 p-3 border rounded bg-white">
                                <h4 class="text-primary text-center">Détails du Partenariat Choisi</h4>
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <p><strong>Nom:</strong> {{ partenariat.nom }}</p>
                                        <p><strong>Type:</strong> {{ partenariat.type }}</p>
                                        <p><strong>Description:</strong> {{ partenariat.description }}</p>
                                    </div>
                                    <div class="col-md-4 text-end">
                                        {% if partenariat.image %}
                                            <img src="{{ asset('uploads/partenariats/' ~ partenariat.image) }}" alt="Image du Partenariat" class="rounded-circle" style="width: 150px; height: 150px; object-fit: cover;">
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        {% endif %}

                        <!-- Début du Formulaire -->
                        {{ form_start(form, {'attr': {'class': 'row g-3', 'enctype': 'multipart/form-data'}}) }}

                            <div class="col-lg-6 col-md-6">
                                <label for="{{ form.datePostulation.vars.id }}" class="form-label">Date de Postulation</label>
                                {{ form_widget(form.datePostulation, {'attr': {'class': 'form-control border-primary p-2 bg-light', 'readonly': 'readonly'}}) }}
                                <div class="invalid-feedback">{{ form_errors(form.datePostulation) }}</div>
                            </div>

                            <div class="col-lg-6 col-md-6">
                                <label for="{{ form.cv.vars.id }}" class="form-label">Veuillez Mettre Votre CV <span class="text-danger">*</span></label>
                                {{ form_widget(form.cv, {'attr': {'class': 'form-control border-primary p-2 ' ~ (form.cv.vars.errors|length > 0 ? 'is-invalid' : '')}}) }}
                                <div class="invalid-feedback">{{ form_errors(form.cv) }}</div>
                            </div>

                            <div class="col-lg-6 col-md-6">
                                <label for="{{ form.portfolio.vars.id }}" class="form-label">Portfolio <span class="text-danger">*</span></label>
                                {{ form_widget(form.portfolio, {'attr': {'class': 'form-control border-primary p-2 ' ~ (form.portfolio.vars.errors|length > 0 ? 'is-invalid' : '')}}) }}
                                <div class="invalid-feedback">{{ form_errors(form.portfolio) }}</div>
                            </div>

                            <div class="col-lg-6 col-md-6">
                                <label for="{{ form.typeCollab.vars.id }}" class="form-label">Type de Collaboration <span class="text-danger">*</span></label>
                                {{ form_widget(form.typeCollab, {'attr': {'class': 'form-select border-primary p-2 ' ~ (form.typeCollab.vars.errors|length > 0 ? 'is-invalid' : '')}}) }}
                                <div class="invalid-feedback">{{ form_errors(form.typeCollab) }}</div>
                            </div>

                            <div class="mb-3 text-start">
                                <label for="{{ form.motivation.vars.id }}" class="form-label">Lettre de motivation <span class="text-danger">*</span></label>
                                {{ form_widget(form.motivation, {'attr': {'class': 'w-100 form-control p-3 mb-4 border-primary bg-light ' ~ (form.motivation.vars.errors|length > 0 ? 'is-invalid' : '')}}) }}
                                <div class="invalid-feedback">{{ form_errors(form.motivation) }}</div>
                            </div>

                            <div class="col-12 text-center">
                                <button type="submit" class="btn btn-primary px-5 py-3 rounded-pill">Enregistrer</button>
                            </div>

                        {{ form_end(form) }}
                        <!-- Fin du Formulaire -->
                        
                    </div>
                </div>
                <div class="col-1">
                    <img src="{{ asset('img/background-site.jpg') }}" class="img-fluid h-100 rounded-end" style="object-fit: cover; opacity: 5; margin: 0px 0;">
                </div>
            </div>
        </div>
    </div>

    <style>
        .is-invalid {
            border-color: red !important;
        }
        .invalid-feedback {
            color: red;
            font-size: 0.9em;
        }
    </style>

{% endblock %}
