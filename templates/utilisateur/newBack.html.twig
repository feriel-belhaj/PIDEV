{% extends 'baseBack.html.twig' %}

{% block title %}Utilisateur{% endblock %}

{% block body %}
<main class="content">
    <div class="container-fluid p-0">
        <div class="mb-3">
            <h1 class="h3 d-inline align-middle">Créer un compte</h1>
        </div>
        <div class="row">
            <!-- Informations personnelles -->
            <div class="col-12 col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Informations personnelles</h5>
                    </div>
                    <div class="card-body">
                        {{ form_start(form ,{'attr' : {'novalidate' : 'novalidate', 'id' :"register-form"}}) }}

                        <div class="row mb-3">
                            <div class="col-md-6">
                                {{ form_widget(form.nom, {'attr': {'class': 'form-control', 'placeholder': 'Nom'}, 'label': false}) }}
                                {{ form_errors(form.nom) }}
                            </div>
                            <div class="col-md-6">
                                {{ form_widget(form.prenom, {'attr': {'class': 'form-control', 'placeholder': 'Prénom'}, 'label': false}) }}
                                {{ form_errors(form.prenom) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_widget(form.email, {'attr': {'class': 'form-control', 'placeholder': 'Email' ,'id' :"register-email"}, 'label': false}) }}
                            {{ form_errors(form.email) }}
                        </div>

                        <!-- Champs mot de passe -->
                        <div class="mb-3">
                            {{ form_widget(form.password.first, {'attr': {'class': 'form-control', 'placeholder': 'Mot de passe', 'autocomplete': 'new-password'}, 'label': false}) }}
                            {{ form_errors(form.password.first) }}
                        </div>

                        <div class="mb-3">
                            {{ form_widget(form.password.second, {'attr': {'class': 'form-control', 'placeholder': 'Confirmer le mot de passe', 'autocomplete': 'new-password'}, 'label': false}) }}
                            {{ form_errors(form.password.second) }}
                        </div>
                        <div class="mb-3" id="password-match"></div>

                    </div>
                </div>
            </div>

            <!-- Informations supplémentaires à droite de "Informations personnelles" -->
            <div class="col-12 col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Informations supplémentaires</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                {{ form_widget(form.adresse, {'attr': {'class': 'form-control', 'placeholder': 'Adresse'}, 'label': false}) }}
                                {{ form_errors(form.adresse) }}
                            </div>
                            <div class="col-md-6">
                                {{ form_widget(form.telephone, {'attr': {'class': 'form-control', 'placeholder': 'Téléphone'}, 'label': false}) }}
                                {{ form_errors(form.telephone) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_widget(form.sexe, {'attr': {'class': 'form-select'}, 'label': 'Sexe'}) }}
                            {{ form_errors(form.sexe) }}
                        </div>

                        <div class="mb-3">
                            {{ form_widget(form.role, {'attr': {'class': 'form-select'}, 'label': 'Rôle'}) }}
                            {{ form_errors(form.role) }}
                        </div>

                        <div class="mb-3">
                            {{ form_widget(form.imageFile, {'attr': {'class': 'form-control'}, 'label': 'Photo de profil'}) }}
                            {{ form_errors(form.imageFile) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bouton d'inscription centré en bas -->
        <div class="row">
            <div class="col-12 text-center mt-4">
                <button type="submit" class="btn btn-primary" id="register-button">Enregistrer</button>
            </div>
        </div>

        {{ form_end(form) }}
    </div>
</main>

<a href="{{ path('app_utilisateur_back') }}">back to list</a>

{% endblock %}

{% block javascripts %}

<script src="{{ asset('js/app.js') }}"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
        setTimeout(function() {
            const passwordField = document.getElementById('utilisateur_password_first');
            const confirmPasswordField = document.getElementById('utilisateur_password_second');
            const passwordMatchMessage = document.getElementById('password-match');
            
            

            confirmPasswordField.addEventListener('input', function() {
                if (confirmPasswordField.value === passwordField.value) {
                    passwordMatchMessage.textContent = 'Les mots de passe correspondent';
                    passwordMatchMessage.style.color = 'green';
                } else {
                    passwordMatchMessage.textContent = 'Les mots de passe ne correspondent pas';
                    passwordMatchMessage.style.color = 'red';
                }
            });
        }, 100);  
    });
    
    </script>
{% endblock %}
